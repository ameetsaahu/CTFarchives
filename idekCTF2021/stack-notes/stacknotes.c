#include <stdio.h>
#include <stdlib.h>

#define malloca(size) (size>0x200) ? malloc(size) : alloca((size/8)*8);

char title[2048] = "\x20\x20\x73\x53\x53\x73\x20\x20\x73\x64\x53\x53\x5f\x53\x53\x53\x53\x53\x53\x62\x73\x20\x20\x20\x2e\x53\x5f\x53\x53\x53\x73\x20\x20\x20\x20\x20\x20\x73\x53\x53\x73\x20\x20\x20\x2e\x53\x20\x20\x20\x20\x53\x2e\x20\x20\x20\x20\x2e\x53\x5f\x73\x53\x53\x73\x20\x20\x20\x20\x20\x20\x73\x53\x53\x73\x5f\x73\x53\x53\x73\x20\x20\x20\x20\x73\x64\x53\x53\x5f\x53\x53\x53\x53\x53\x53\x62\x73\x20\x20\x20\x20\x73\x53\x53\x73\x20\x20\x20\x20\x73\x53\x53\x73\x20\x20\n\x20\x64\x25\x25\x53\x50\x20\x20\x59\x53\x53\x53\x7e\x53\x25\x53\x53\x53\x53\x53\x50\x20\x20\x2e\x53\x53\x7e\x53\x53\x53\x53\x53\x20\x20\x20\x20\x64\x25\x25\x53\x50\x20\x20\x2e\x53\x53\x20\x20\x20\x20\x53\x53\x2e\x20\x20\x2e\x53\x53\x7e\x59\x53\x25\x25\x62\x20\x20\x20\x20\x64\x25\x25\x53\x50\x7e\x59\x53\x25\x25\x62\x20\x20\x20\x59\x53\x53\x53\x7e\x53\x25\x53\x53\x53\x53\x53\x50\x20\x20\x20\x64\x25\x25\x53\x50\x20\x20\x20\x64\x25\x25\x53\x50\x20\x20\n\x64\x25\x53\'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x53\x53\x53\x53\x20\x20\x64\x25\x53\'\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x25\x53\x20\x20\x20`\x53\x25\x62\x20\x20\x64\x25\x53\'\x20\x20\x20\x20\x20`\x53\x25\x62\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x64\x25\x53\'\x20\x20\x20\x20\x64\x25\x53\'\x20\x20\x20\x20\n\x53\x25\x7c\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x53\x25\x53\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x64\x2a\x53\x20\x20\x53\x25\x53\x20\x20\x20\x20\x53\x25\x53\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x20\x20\x20\x20\x53\x25\x7c\x20\x20\x20\x20\x20\n\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x25\x53\x20\x53\x53\x53\x53\x25\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x2e\x53\x2a\x53\x20\x20\x53\x25\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\n\x59\x26\x53\x73\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x53\x53\x25\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x53\x26\x53\x5f\x73\x64\x53\x53\x53\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x5f\x53\x73\x20\x20\x59\x26\x53\x73\x20\x20\x20\x20\n`\x53\x26\x26\x53\x20\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x53\x26\x53\x7e\x59\x53\x53\x59\x25\x62\x20\x20\x53\x26\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x7e\x53\x50\x20\x20`\x53\x26\x26\x53\x20\x20\x20\n\x20\x20`\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20`\x53\x25\x20\x20\x53\x26\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20\x53\x26\x53\x20\x20\x20\x20\x20\x20\x20`\x53\x2a\x53\x20\x20\n\x20\x20\x20\x6c\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x26\x53\x20\x20\x53\x2a\x62\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x53\x25\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x53\x2a\x62\x20\x20\x20\x20\x20\x20\x20\x64\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x62\x20\x20\x20\x20\x20\x20\x20\x20\x6c\x2a\x53\x20\x20\n\x20\x20\x2e\x53\x2a\x50\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x53\x2a\x53\x2e\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x53\x26\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x53\x2a\x53\x2e\x20\x20\x20\x20\x20\x2e\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x2e\x20\x20\x20\x20\x20\x20\x2e\x53\x2a\x50\x20\x20\n\x73\x53\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x53\x53\x53\x62\x73\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x53\x26\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x53\x53\x53\x62\x73\x5f\x73\x64\x53\x53\x53\x20\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x20\x53\x53\x53\x62\x73\x20\x20\x73\x53\x53\x2a\x53\x20\x20\x20\n\x59\x53\x53\'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x53\x53\x53\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x59\x53\x53\x50\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x53\x53\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x53\x53\x53\x20\x20\x20\x20\x59\x53\x53\x50\x7e\x59\x53\x53\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x2a\x53\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x53\x53\x50\x20\x20\x59\x53\x53\'\x20\x20\x20\x20\n\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x50\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x50\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x50\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x50\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x53\x50\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\n\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x59\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\n\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20";
char *mem[16];
long sizes[16];
char choice;
int idx;

void banner() {
  printf("\033[2J");
  puts("\x2e\x2d\x2e\x20\x20\x2e\x2d\x2e\x2e\x2d\x2d\x2d\x2d\x2e\x2e\x2d\x2e\x20\x20\x20\x2e\x2d\x2d\x2d\x2d\x2e\x20\x2e\x2d\x2d\x2d\x2e\x2e\x2d\x2e\x20\x20\x2e\x2d\x2e\x2e\x2d\x2d\x2d\x2d\x2e\x20\x20\x20\x20\x2e\x2d\x2d\x2d\x2d\x2d\x2e\x20\x2e\x2d\x2d\x2d\x2e\x20\x20\n\x7c\x20\x7b\x20\x20\x7d\x20\x7c\x7d\x20\x7c\x5f\x5f\x7d\x7d\x20\x7c\x20\x20\x20\x7c\x20\x7d`\x2d\'\x2f\x20\x7b\x2d\x2e\x20\x7d\x20\x20\\\x2f\x20\x20\x7b\x7d\x20\x7c\x5f\x5f\x7d\x20\x20\x20\x20`\x2d\'\x20\'\x2d\'\x2f\x20\x7b\x2d\x2e\x20\\\x20\n\x7b\x20\x20\x2f\\\x20\x20\x7d\x7d\x20\'\x5f\x5f\x7d\x7d\x20\'\x2d\x2d\x2e\x7c\x20\x7d\x2c\x2d\x2e\\\x20\'\x2d\x7d\x20\x2f\x20\x7b\x20\x20\x7d\x20\x7c\x7d\x20\'\x5f\x5f\x7d\x20\x20\x20\x20\x20\x20\x7d\x20\x7b\x20\x20\\\x20\'\x2d\x7d\x20\x2f\x20\n`\x2d\'\x20\x20`\x2d\'`\x2d\x2d\x2d\x2d\'`\x2d\x2d\x2d\x2d\'`\x2d\x2d\x2d\x2d\'\x20`\x2d\x2d\x2d\'`\x2d\'\x20\x20`\x2d\'`\x2d\x2d\x2d\x2d\'\x20\x20\x20\x20\x20\x20`\x2d\'\x20\x20\x20`\x2d\x2d\x2d\'\x20\x20\n\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20");
  puts(title);
}

void menu() {
  puts("(c)reate a stacknote");
  puts("(w)rite in a stacknote");
  puts("(d)elete a stacknote");
  puts("(v)iew a stacknote");
  puts("(e)xit");
  fputs("> ", stdout);
}

int main() {
  setvbuf(stdin, NULL, 2, 0);
  setvbuf(stdout, NULL, 2, 0);
  banner();
  while (1) {
    menu();
    scanf("%c%*c", &choice);
    if (choice == 'c') {
      puts("Thank you for deciding to create a stacknote!");
      puts("Where would you like to store your stacknote?");
      scanf("%d%*c", &idx);
      if (idx < 0 || idx > 15) { exit(0); }
      puts("How long is your stacknote?");
      scanf("%ld%*c", &sizes[idx]);
      if (sizes[idx] < 0 || sizes[idx] > 0x1000) { exit(0); }
      mem[idx] = malloca(sizes[idx]);
    }
    else if (choice == 'd') {
      puts("What stacknote would you like to delete?");
      scanf("%d%*c", &idx);
      if (idx < 0 || idx > 15) { exit(0); }
      free(mem[idx]);
      mem[idx] = 0;
      sizes[idx] = 0;
      puts("Stacknote deleted.");
    }
    else if (choice == 'w') {
      puts("Which stacknote would you like to write in?");
      scanf("%d%*c", &idx);
      if (idx < 0 || idx > 15) { exit(0); }
      puts("Enter your content:");
      read(0, mem[idx], sizes[idx]);
      puts("Stacknote written.");
    }
    else if (choice == 'v') {
      puts("Which stacknote would you like to view");
      scanf("%d%*c", &idx);
      if (idx < 0 || idx > 15) { exit(0); }
      puts("Note:");
      write(1, mem[idx], sizes[idx]);
      puts("");
    }
    else if (choice == 'e') {
      return 0;
    }
  }
}
